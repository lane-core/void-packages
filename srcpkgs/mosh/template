# Template file for 'mosh'
pkgname=mosh
version=20220204
_commit=dbe419d0e069df3fedc212d456449f64d0280c76
revision=1
wrksrc=${pkgname}-${_commit}
build_style=gnu-configure
hostmakedepends="pkg-config protobuf autoconf automake"
makedepends="ncurses-devel protobuf-devel libutempter-devel openssl-devel"
depends="perl-IO-Tty"
short_desc="Mobile shell, remote terminal application that allows roaming"
maintainer="Nathan Owens <ndowens04@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://mosh.org/"
distfiles="https://github.com/mobile-shell/mosh/archive/${_commit}.tar.gz"
checksum=49268ce1a81b251dffdd117dbc687d86cb80b18e3028019af5fddfa5c04ac1a9

pre_configure() {
	# make local.test always succeed. It fails due to missing X server in chroot.
	printf "%s\n" "#!/bin/sh" ":" > src/tests/local.test
	./autogen.sh
}

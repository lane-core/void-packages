# Template file for 'SoulseekQt'
pkgname=SoulseekQt
version=20180130
_release=2018-1-30
revision=1
wrksrc=${pkgname}-${version}
archs="x86_64"
build_style=fetch
hostmakedepends="tar"
depends="libasyncns dbus-libs freetype libffi libflac libgcrypt liblzma 
 libogg orc libpng12 apulse libpulseaudio apulse qt5-core qt5-dbus qt5-gui
 qt5-multimedia qt5-network qt5-opengl qt5-widgets qt5-gui libselinux
 libsndfile libX11 libXau libXcomposite libXdamage libXdmcp libXext 
 libXfixes libXi"
short_desc="Soulseek network client for Linux"
maintainer="lane-brain <lane@mailbox.org>"
license="custom:Soulseek"
homepage="https://www.slsknet.org"
distfiles="${homepage}/SoulseekQt/Linux/SoulseekQt-${_release}-64bit-appimage.tgz"
checksum=86938731dfd4303ab62aceac525afdef09f16eba78a8c2560a92a890bb572c34
nopie=yes
nostrip=yes

post_extract() {
	tar -xvzf SoulseekQt-${_release}-64bit-appimage.tgz
}

do_install() {
	./"SoulseekQt-${_release}-64bit.AppImage" --appimage-extract
    vbin squashfs-root/SoulseekQt
    vinstall squashfs-root/soulseek.png 644 usr/share/pixmaps
    vinstall ${FILESDIR}/SoulseekQt.desktop 644 usr/share/applications
}
